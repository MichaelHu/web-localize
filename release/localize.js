window.WL=function(){function t(t){var e=t.match(/https?\:\/\/([^\/]+)/i)[1];return e==location.host}function e(){}function n(t){var n=new window.XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&(n.onreadystatechange=e,(n.status>=200&&n.status<300||304==n.status||0==n.status&&"file:"==protocol)&&(result=n.responseText,u(t.info,t.id,result),t.success&&t.success(result)))},n.open("GET",t.url,!0),n.send(null)}function o(t){var e={fullPath:t,path:"",version:"",dir:"",fileName:"",type:"",name:"",md5:""},n=/^[^\?]+/,o=/^[^\?]+\?([^\?]+)/,s=/^(.+\/)([^\/]+)$/,a=/^(.+)\.([^\.]+)$/,c=/^(.+)_([^_]{7})$/,i=t,r=null;
return(r=t.match(n))&&(e.path=r[0]),(r=t.match(o))&&(e.version=r[0]),e.dir=e.path,(r=e.path.match(s))&&(e.dir=r[1],e.fileName=r[2]),i=e.fileName,(r=e.fileName.match(a))&&(e.type=r[2],i=r[1]),e.name=i,(r=i.match(c))&&(e.md5=r[2],e.name=r[1]),e}function s(t){var e="";return e=[g+"_",y+"_",t.dir,t.name,"."+t.type].join("")}function a(t,e){var n=t.type.toLowerCase();switch(n){case"css":c(t,e);break;case"js":i(t,e)}}function c(e){for(var n=e.fullPath,o=s(e),a=document.styleSheets,i=a.length,r=null,l=0;i>l;l++)if(a.item(l).href==n){r=a.item(l);
break}if(r&&r.rules){for(var u=r.rules,f=u.length,m={},l=0;f>l;l++)m[l]=u.item(l).cssText;localStorage.setItem(o,JSON.stringify({md5:e.md5,content:m}))}else t(n)&&setTimeout(function(){c(e)},500)}function i(t,e){var n=s(t),o=e;localStorage.setItem(n,JSON.stringify({md5:t.md5,content:o}))}function r(t,e){var n=t.type.toLowerCase();switch(n){case"css":l(t,e);break;case"js":w.push(e),u(t,e)}}function l(t,e){var n=s(t),o=JSON.parse(localStorage.getItem(n)),a=[];for(var c in o.content)a.push(o.content[c]);
document.write(['<style tyle="text/css" id="',e,'">',a.join("\n"),"</style>"].join(""))}function u(t,e,n){var o,a,c=s(t);if(n?a=n:(o=JSON.parse(localStorage.getItem(c)),a=o.content),0==w.indexOf(e)){w.splice(0,1);try{(1,eval)(a)}catch(i){}}else setTimeout(function(){console.log("wait to execute "+e),u(t,e,n)},10)}function f(t,e){var n=t.type.toLowerCase();switch(n){case"css":m(t,e);break;case"js":w.push(e),h(t,e)}}function m(t,e){document.write(['<link rel="stylesheet" type="text/css" id="',e,'"',' href="',t.fullPath,'" />'].join("")),setTimeout(function(){a(t)
},1e3)}function h(t,e){setTimeout(function(){n({url:t.fullPath,info:t,id:e,success:function(e){console.log("save "+t.fullPath),setTimeout(function(){a(t,e)},1e3)}})},0)}function d(t){var e=p(t),n=o(e);v(n)?(console.log("exists "+n.fullPath),r(n,t)):(console.log("not exists "+n.fullPath),f(n,t))}function p(t){var e=document.getElementById(t),n=e.href||e.src;return e.parentNode.removeChild(e),n}function v(t){var e,n,o=s(t);if(e=localStorage.getItem(o)){if(n=JSON.parse(e),n.md5==t.md5)return!0;localStorage.removeItem(o)
}return!1}var g="WL",y="",w=[];return{localize:d}}();